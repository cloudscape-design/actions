name: Lock github threads

on:
  workflow_call:
    inputs:
      repository:
        type: string
        description: Name of repository in organization
        required: true

permissions:
  discussions: write

jobs:
  discussion:
    runs-on: ubuntu-latest
    steps:
      - name: Setup lock-discussion project
        run: |
          cp -r actions/.github/workflows/lock-discussion lock-discussion
          cd lock-discussion
          npm i --force

      - name: Run lock discussion
        run: |
          cd lock-discussion
          npm run
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          repo: ${{inputs.repository}}